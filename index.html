<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä GrowBox [AtlantWeed.link]</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    :root {
      --bg: #f9fafb;
      --text: #111827;
      --accent: #007AFF;
      --accent-hover: #0062cc;
      --card-bg: #ffffff;
      --border: #e5e7eb;
      --shadow: rgba(0, 0, 0, 0.05);
      --shadow-hover: rgba(0, 0, 0, 0.08);
      --slider-track: #d1d5db;
      --slider-thumb: var(--accent);
      --switch-bg: #f3f4f6;
      --footer-text: #6b7280;
    }

    [data-theme="dark"] {
      --bg: #111827;
      --text: #f9fafb;
      --card-bg: #1f2937;
      --border: #374151;
      --shadow: rgba(0, 0, 0, 0.2);
      --shadow-hover: rgba(0, 0, 0, 0.3);
      --slider-track: #4b5563;
      --switch-bg: #374151;
      --footer-text: #9ca3af;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      padding: 16px;
      min-height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--card-bg);
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 10px 30px var(--shadow);
      position: relative;
    }

    .theme-toggle {
      position: absolute;
      top: 16px;
      right: 16px;
      background: var(--switch-bg);
      border: none;
      width: 52px;
      height: 28px;
      border-radius: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 0 4px;
      transition: background 0.3s;
    }

    .theme-toggle::after {
      content: 'üåô';
      font-size: 14px;
      width: 20px;
      height: 20px;
      background: white;
      color: black;
      border-radius: 50%;
      display: block;
      transition: transform 0.3s;
    }

    [data-theme="dark"] .theme-toggle::after {
      content: '‚òÄÔ∏è';
      transform: translateX(24px);
      background: #1f2937;
      color: white;
    }

    h1 {
      font-size: 28px;
      font-weight: 800;
      margin: 0 0 24px;
      text-align: center;
      letter-spacing: -0.4px;
      color: var(--text);
    }

    h1::after {
      content: '';
      display: block;
      width: 50px;
      height: 3px;
      background: var(--accent);
      margin: 10px auto 0;
      border-radius: 2px;
    }

    .slider-group {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin-bottom: 28px;
    }

    .slider-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label, .slider-label {
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
    }

    input[type="range"] {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--card-bg);
      color: var(--text);
      font-size: 16px;
      -webkit-appearance: none;
      height: 8px;
      background: var(--slider-track);
      outline: none;
      border-radius: 4px;
      margin-top: 6px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--slider-thumb);
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0, 122, 255, 0.4);
      transition: transform 0.2s ease;
    }

    input[type="range"]::-webkit-slider-thumb:active {
      transform: scale(1.3);
    }

    .slider-value {
      font-size: 22px;
      font-weight: 800;
      color: var(--accent);
    }

    .btn {
      width: 100%;
      padding: 16px;
      font-size: 17px;
      font-weight: 700;
      color: white;
      background: var(--accent);
      border: none;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 4px 12px rgba(0, 122, 255, 0.25);
    }

    .btn:hover {
      background: var(--accent-hover);
    }

    .btn:active {
      transform: scale(0.98);
    }

    .result {
      display: none;
      text-align: center;
      margin-top: 28px;
      opacity: 0;
      transform: translateY(15px);
      transition: opacity 0.5s ease, transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .result.show {
      opacity: 1;
      transform: translateY(0);
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 20px;
    }

    .card {
      display: flex;
      align-items: center;
      padding: 18px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 4px 12px var(--shadow);
      text-decoration: none;
      color: var(--text);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s, transform 0.5s, box-shadow 0.25s;
    }

    .card:hover {
      box-shadow: 0 6px 18px var(--shadow-hover);
    }

    .card i {
      font-size: 22px;
      width: 32px;
      text-align: center;
      margin-right: 14px;
      color: var(--accent);
    }

    .card-content strong {
      font-size: 16px;
      font-weight: 700;
      display: block;
      margin-bottom: 4px;
    }

    .card-content div:last-child {
      font-size: 15px;
      font-weight: 600;
      color: var(--accent);
    }

    .total {
      font-size: 20px;
      font-weight: 800;
      color: var(--accent);
      margin: 16px 0;
    }

    .footer {
      margin-top: 32px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      font-size: 14px;
      color: var(--footer-text);
      text-align: center;
      line-height: 1.5;
    }

    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 600px) {
      .container { padding: 20px; border-radius: 16px; }
      h1 { font-size: 24px; }
      .slider-value { font-size: 20px; }
      .btn { padding: 14px; font-size: 16px; }
      .footer { font-size: 13px; }
    }

    @media (max-width: 400px) {
      body { padding: 12px; }
      h1 { font-size: 22px; }
      input[type="range"] { font-size: 15px; padding: 10px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="theme-toggle" id="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"></button>
    <h1>–°–æ–±—Ä–∞—Ç—å GrowBox</h1>

    <div class="slider-group">
      <div class="slider-item">
        <div class="slider-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É—Å—Ç–æ–≤</div>
        <div class="slider-value" id="plants-value">6</div>
        <input type="range" id="plants" min="1" max="16" value="6" />
      </div>

      <div class="slider-item">
        <div class="slider-label">–û–±—ä—ë–º –≥–æ—Ä—à–∫–∞, –ª</div>
        <div class="slider-value" id="pot-value">11</div>
        <input type="range" id="pot" min="3" max="20" step="1" value="11" />
      </div>
    </div>

    <button class="btn" id="calculate">–ü–û–î–û–ë–†–ê–¢–¨ –ö–û–ú–ü–õ–ï–ö–¢</button>

    <div class="result" id="result">
      <div class="cards" id="cards"></div>
      <div class="total" id="total"></div>
      <a href="https://atlantweed.link" class="btn" target="_blank" rel="noopener">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –≥—Ä–æ–≤–µ—Ä—É</a>
    </div>

    <div class="footer">
      <p>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ AtlantWeed.link<br>
      –ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã: –ü–Ω‚Äì–ü—Ç, 10:00‚Äì18:00</p>
    </div>
  </div>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  const body = document.body;
  const savedTheme = localStorage.getItem('theme') || 'light';
  body.setAttribute('data-theme', savedTheme);
  themeToggle.addEventListener('click', () => {
    const next = body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
    body.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
  });

  // –ì—Ä–æ—É—Ç–µ–Ω—Ç—ã ‚Äî –¢–û–õ–¨–ö–û –ü–û–î–¢–í–ï–†–ñ–î–Å–ù–ù–´–ï
  const tents = [
    { key: '40',   l: 40,  w: 40,  h: 120, area: 0.16, maxPlants: 1,  price: 9990,  url: 'https://minifermer.ru/product_3509.html' },
    { key: '60',   l: 60,  w: 60,  h: 140, area: 0.36, maxPlants: 3,  price: 12990, url: 'https://minifermer.ru/product_3510.html' },
    { key: '80',   l: 80,  w: 80,  h: 160, area: 0.64, maxPlants: 5,  price: 15990, url: 'https://minifermer.ru/product_3511.html' },
    { key: '100',  l: 100, w: 100, h: 200, area: 1.00, maxPlants: 8,  price: 18990, url: 'https://minifermer.ru/product_1534.html' },
    { key: '120',  l: 120, w: 120, h: 200, area: 1.44, maxPlants: 12, price: 19990, url: 'https://minifermer.ru/product_1535.html' },
    { key: '150',  l: 150, w: 150, h: 200, area: 2.25, maxPlants: 16, price: 24990, url: 'https://minifermer.ru/product_3513.html' }
  ];

const pots = {
  3:  { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 3 –ª',   price: 66,  url: 'https://minifermer.ru/product_1315.html' },
  5:  { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 5 –ª',   price: 78,  url: 'https://minifermer.ru/product_1316.html' },
  7:  { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 7 –ª',   price: 104, url: 'https://minifermer.ru/product_1354.html' },
  10: { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 10 –ª',  price: 128, url: 'https://minifermer.ru/product_1355.html' },
  15: { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 15 –ª',  price: 154, url: 'https://minifermer.ru/product_1358.html' },
  20: { name: '–¢–∫–∞–Ω–µ–≤—ã–π –≥–æ—Ä—à–æ–∫ 20 –ª',  price: 176, url: 'https://minifermer.ru/product_1373.html' }
};

  const filters = {
    '250': { name: '–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä Magicfilter 250/100', price: 3990, url: 'https://minifermer.ru/product_2273.html' },
    '350': { name: '–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä Magicfilter 350/125', price: 4290, url: 'https://minifermer.ru/product_2274.html' },
    '500': { name: '–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä Magicfilter 500/150', price: 5490, url: 'https://minifermer.ru/product_2275.html' },
    '800': { name: '–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä Magicfilter 800/150', price: 6990, url: 'https://minifermer.ru/product_2276.html' }
  };

  const fans = {
    '100': { name: '–ö–∞–Ω–∞–ª—å–Ω—ã–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä HF 100', price: 2190, url: 'https://minifermer.ru/product_3737.html' },
    '125': { name: '–ö–∞–Ω–∞–ª—å–Ω—ã–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä HF 125', price: 2490, url: 'https://minifermer.ru/product_3738.html' },
    '150': { name: '–ö–∞–Ω–∞–ª—å–Ω—ã–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä HF 150', price: 2890, url: 'https://minifermer.ru/product_3739.html' }
  };

  // –£–±–∏—Ä–∞–µ–º —Å–ª–∞–π–¥–µ—Ä –æ–±—ä—ë–º–∞ ‚Äî —Ä–∞—Å—á—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
  const plantsSlider = document.getElementById('plants');
  const plantsValue = document.getElementById('plants-value');

  // –°–∫—Ä—ã—Ç—å —Å–ª–∞–π–¥–µ—Ä –æ–±—ä—ë–º–∞, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω
  document.querySelector('.slider-item:nth-child(2)').style.display = 'none';

  plantsSlider.addEventListener('input', () => {
    plantsValue.textContent = plantsSlider.value;
  });

  function selectTentAndVentilation(p) {
    let tent = tents.find(t => p <= t.maxPlants) || tents[tents.length - 1];

    let filter, fan;
    if (tent.area <= 0.36) {
      filter = filters['250'];
      fan = fans['100'];
    } else if (tent.area <= 0.72) {
      filter = filters['350'];
      fan = fans['125'];
    } else if (tent.area <= 1.0) {
      filter = filters['500'];
      fan = fans['150'];
    } else {
      filter = filters['800'];
      fan = fans['150'];
    }

    return { tent, filter, fan };
  }

function selectPotSize(area) {
  if (area <= 0.16) return 3;   // 40√ó40 ‚Üí 1 –∫—É—Å—Ç ‚Üí —Ä–∞—Å—Å–∞–¥–∞/–º–∏–∫—Ä–æ–∑–µ–ª–µ–Ω—å
  if (area <= 0.36) return 5;   // 60√ó60 ‚Üí –¥–æ 3 –∫—É—Å—Ç–æ–≤
  if (area <= 0.64) return 10;  // 80√ó80 ‚Üí –¥–æ 5 –∫—É—Å—Ç–æ–≤
  if (area <= 1.00) return 15;  // 100√ó100 ‚Üí –¥–æ 8 –∫—É—Å—Ç–æ–≤
  return 20;                    // 120√ó120 –∏ 150√ó150 ‚Üí –¥–æ 12‚Äì16 –∫—É—Å—Ç–æ–≤
}

  function selectLamp(l, w) {
    const area = (l / 100) * (w / 100);
    if (area <= 0.64) {
      return { name: '–ö–æ–º–ø–ª–µ–∫—Ç Quantum Board 240 –í—Ç', price: 18900, url: 'https://minifermer.ru/category/c266/', power: 240 };
    } else if (area <= 1.2) {
      return { name: '–ö–æ–º–ø–ª–µ–∫—Ç Quantum Board 360 –í—Ç', price: 25900, url: 'https://minifermer.ru/category/c311/', power: 360 };
    } else {
      const units = Math.ceil(area / 2.0);
      return {
        name: `–ö–æ–º–ø–ª–µ–∫—Ç Quantum Board 480 –í—Ç${units > 1 ? ` √ó${units}` : ''}`,
        price: 32900 * units,
        url: 'https://minifermer.ru/category/c294/',
        power: 480 * units
      };
    }
  }

  document.getElementById('calculate').addEventListener('click', () => {
    const p = parseInt(plantsSlider.value);

    const { tent, filter, fan } = selectTentAndVentilation(p);
    const potSize = selectPotSize(tent.area);
    const pot = pots[potSize];
    const lamp = selectLamp(tent.l, tent.w);

    const totalPotsPrice = pot.price * p;

    const products = [
      { name: `–ì—Ä–æ—É—Ç–µ–Ω—Ç MiniFermer ${tent.l}√ó${tent.w}√ó${tent.h} —Å–º`, price: tent.price, url: tent.url, icon: 'fa-tent' },
      { name: lamp.name, price: lamp.price, url: lamp.url, icon: 'fa-lightbulb' },
      { name: `${p} —à—Ç. ${pot.name}`, price: totalPotsPrice, url: pot.url, icon: 'fa-seedling' },
      { name: filter.name, price: filter.price, url: filter.url, icon: 'fa-filter' },
      { name: fan.name, price: fan.price, url: fan.url, icon: 'fa-fan' }
    ];

    const total = products.reduce((sum, item) => sum + item.price, 0);
    const formattedTotal = total.toLocaleString('ru-RU') + ' ‚ÇΩ';

    const cardsContainer = document.getElementById('cards');
    cardsContainer.innerHTML = '';
    products.forEach((product, i) => {
      const card = document.createElement('a');
      card.href = product.url;
      card.className = 'card';
      card.target = '_blank';
      card.rel = 'noopener noreferrer';
      const formattedPrice = product.price.toLocaleString('ru-RU') + ' ‚ÇΩ';
      card.innerHTML = `
        <i class="fas ${product.icon}"></i>
        <div class="card-content">
          <strong>${product.name}</strong>
          <div>${formattedPrice}</div>
        </div>
      `;
      card.style.animation = `fadeIn 0.6s forwards`;
      card.style.animationDelay = `${i * 0.1}s`;
      card.style.opacity = '0';
      cardsContainer.appendChild(card);
    });

    document.getElementById('total').textContent = `–ò—Ç–æ–≥–æ: ${formattedTotal}`;
    const resultElement = document.getElementById('result');
    resultElement.style.display = 'block';
    setTimeout(() => resultElement.classList.add('show'), 10);
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  });
</script>
</body>
</html>
